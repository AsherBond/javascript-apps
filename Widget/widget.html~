
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script>

$(function() {
	var groupname_area = $('#title');
	var peoplecount_area = $('#people');
	var groupname = $('#tempname');
	var hsize = $('#width');
	var time_date_area = $('#date');
	var logo_area = $('#logo');
	var map_pic = $('#map');
	var map_temp = "";


	$('#exe').click(function() {

		$.getJSON("http://api.meetup.com/ew/containers?urlname="+ groupname.val() +"&key=2965376f4a27313c71736b6a27c7024&callback=?", function(data) {
      			if (data.status && data.status.match(/^200/) == null) {
       				alert(data.status + ": " + data.details);
      			} else {
       			 	$.each(data.results, function(i, ev) {
					if (i==0) {
						//TBD - pull user and group counts out somehow
						groupname_area.empty();
						peoplecount_area.empty();
						logo_area.empty();
						groupname_area.append("<span class=\"MEETUP_EVERYWHERE_WIDGET_count\">290 </span><span class=\"MEETUP_EVERYWHERE_WIDGET_name\">"+ ev.name +"</span>");
						groupname_area.append("<br><span class=\"MEETUP_EVERYWHERE_WIDGET_suffix\">Meetups</span>");
						peoplecount_area.append("<span class=techcrunch\"MEETUP_EVERYWHERE_WIDGET_people\">2,213 People</span>");
						logo_area.append("<a class=\"MEETUP_EVERYWHERE_WIDGET_logo\" href=\"" + ev.meetup_url + "\"><img class=\"MEETUP_EVERYWHERE_WIDGET_bottom_logo\" src=\"http://img1.meetupstatic.com/84869143793177372874/img/birddog/everywhere_widget.png\"/></a>");
					}
        			});
      			}

    		});


		$.getJSON("http://api.meetup.com/ew/events?urlname="+ groupname.val() +"&key=2965376f4a27313c71736b6a27c7024&callback=?", function(data) {
			if (data.status && data.status.match(/^200/) == null) {
       				alert(data.status + ": " + data.details);
      			} else {
				$.each(data.results, function(i, ev) {
					if (i==0) {
						var myDate = new Date( ev.time*1000);
						time_date_area.empty();
						time_date_area.append("<a href=\"" + ev.meetup_url + "\"><span class=\"when birddogData\"><span class=\"date\">" + formatMonth(myDate.getMonth()) + " " + (myDate.getDay() + 1) + "</span><span class=\"time\">"+ formatTime(myDate.getHours(),myDate.getMinutes()) + "</span></span><span class=\"loc birddogData\"><span class=\"city linked\">" + ev.city+ ", " + ev.country + "</span></span></a>");
						time_date_area.append("<a href=\""+ ev.meetup_url + "\"><span class=\"MEETUP_EVERYWHERE_WIDGET_all\">See all<span class=\"MEETUP_EVERYWHERE_WIDGET_go\">></span></span></a>");
					}
					// MAP GENERATOR
					if (i < 50) {
						map_temp = map_temp.concat("|" + ev.lat + "," + ev.lon);
					}
				});

				map_pic.empty();
				map_pic.append("<img src=\"http://maps.google.com/maps/api/staticmap?zoom=0&size=184x92&maptype=roadmap&markers=color:red|size:tiny" + map_temp + "&sensor=false\"/>");
				map_temp = "";
			}
			

			

		});
		

		

	});

	
});

function formatLatLong(la, lo) {
	
}

function formatTime(h,m) {

	var time = "AM";	

	if (h >= 12) {time = "PM";}
	if (h > 12) { h = h - 12;}
	if (m > 9) { return (h + ":" + m + " " + time);}
	else {return (h + ":0" + m + " " + time);}
}

function formatMonth(m) {
	switch (m)
	{
	case 0:
  		return ("Jan");
	case 1:
		return ("Feb");
	case 2:
  		return ("Mar");
	case 3:
		return ("Apr");
	case 4:
		return ("May");
	case 5:
		return ("Jun");
	case 6:
		return ("Jul");
	case 7:
		return ("Aug");
	case 8:
		return ("Sep");
	case 9:
		return ("Oct");
	case 10:
		return ("Nov");
	case 11:
		return ("Dec");
	default:
		return ("Undef");
	}

}


</script>
</head>
<body>
<style type="text/css">
.MEETUP_EVERYWHERE_WIDGET {
  -moz-border-radius-bottomleft:4px;
  -moz-border-radius-bottomright:4px;
  -moz-border-radius-topleft:4px;
  -moz-border-radius-topright:4px;
  background:#1A1A1A none repeat scroll 0 0;
  font-family:verdana,sans-serif;
  width:200px;
}
.MEETUP_EVERYWHERE_WIDGET_body {
  padding:8px;
}
.MEETUP_EVERYWHERE_WIDGET_total a {
  color:#FFFFFF;
  display:block;
  text-decoration:none;
}
.MEETUP_EVERYWHERE_WIDGET a img {
  border:0 none !important;
}
.MEETUP_EVERYWHERE_WIDGET_total a img {
  margin:4px 0;
}
.MEETUP_EVERYWHERE_WIDGET_title {
  display:block;
  font-family:arial,sans-serif;
  font-weight:bold;
  letter-spacing:-1px;
  line-height:1.2em;
}
.MEETUP_EVERYWHERE_WIDGET_total .MEETUP_EVERYWHERE_WIDGET_title {
  font-size:22px;
}
.MEETUP_EVERYWHERE_WIDGET_name {
}
.MEETUP_EVERYWHERE_WIDGET_logo {
  display:block;
  text-align:left;
}
.MEETUP_EVERYWHERE_WIDGET_people {
  display:block;
  font-size:12px;
}
.MEETUP_EVERYWHERE_WIDGET_suffix {
  color:#AAAAAA;
}
.MEETUP_EVERYWHERE_WIDGET_nearby .MEETUP_EVERYWHERE_WIDGET_title {
  color:#AAAAAA;
  font-size:14px;
}
.MEETUP_EVERYWHERE_WIDGET_nearby .MEETUP_EVERYWHERE_WIDGET_nearby_list {
  -moz-border-radius-bottomleft:4px;
  -moz-border-radius-bottomright:4px;
  -moz-border-radius-topleft:4px;
  -moz-border-radius-topright:4px;
  background:#333333 none repeat scroll 0 0;
  display:block;
}
.MEETUP_EVERYWHERE_WIDGET_nearby .MEETUP_EVERYWHERE_WIDGET_nearby_list a {
  border-top:1px solid #1A1A1A !important;
  color:#FFFFFF;
  display:block;
  font-size:12px;
  padding:8px 10px;
  text-decoration:none;
}
.MEETUP_EVERYWHERE_WIDGET_nearby .MEETUP_EVERYWHERE_WIDGET_nearby_list a:after {
  clear:both;
  content:".";
  display:block;
  height:0;
  visibility:hidden;
}
.MEETUP_EVERYWHERE_WIDGET_nearby .MEETUP_EVERYWHERE_WIDGET_nearby_list a:hover {
  background:#A3E4FF none repeat scroll 0 0;
  color:#3C3633 !important;
}
.MEETUP_EVERYWHERE_WIDGET_nearby .MEETUP_EVERYWHERE_WIDGET_nearby_list a {
  padding:6px 10px;
}
.MEETUP_EVERYWHERE_WIDGET_nearby .MEETUP_EVERYWHERE_WIDGET_nearby_list a .MEETUP_EVERYWHERE_WIDGET_all {
  display:block;
  font-family:arial,sans-serif;
  font-size:11.4px;
  font-weight:bold;
  text-align:right;
}<span class="MEETUP_EVERYWHERE_WIDGET_name">
.MEETUP_EVERYWHERE_WIDGET_bottom_logo {
  margin-top:8px;
}
.MEETUP_EVERYWHERE_WIDGET_nearby a .when {
  display:block;
  float:left;
  text-align:right;
  width:4em;
}
.MEETUP_EVERYWHERE_WIDGET_nearby a .loc {
  border-left:1px dotted #555555;
  display:block;
  margin-left:4.35em;
  padding-left:0.35em;
}
.MEETUP_EVERYWHERE_WIDGET_nearby a .loc .city {
  font-weight:bold;
}
.MEETUP_EVERYWHERE_WIDGET_nearby a .when .time, .MEETUP_EVERYWHERE_WIDGET_nearby a .loc .address {
  display:block;
  font-size:10.2px;
}
.MEETUP_EVERYWHERE_WIDGET_go {
  -moz-border-radius-bottomleft:4px;
  -moz-border-radius-bottomright:4px;
  -moz-border-radius-topleft:4px;
  -moz-border-radius-topright:4px;
  background-color:#CA3E47;
  border:2px solid #A8252E;
  color:#FFFFFF !important;
  cursor:pointer;
  display:inline-block;
  font-family:arial;
  font-size:15px;
  font-weight:bold;
  line-height:0.75em;
  margin-left:2px;
  padding:0 4px;
  text-align:center;
  text-shadow:0 0 2px black;
}

</style>

<div class="MEETUP_EVERYWHERE_WIDGET" id="MEETUP_EVERYWHERE_WIDGET_28">
	<div class="MEETUP_EVERYWHERE_WIDGET_body">

		<div class="MEETUP_EVERYWHERE_WIDGET_total">
			<a href="http://www.meetup.com/TechCrunch/">
				<span class="MEETUP_EVERYWHERE_WIDGET_title">
					
					<div id="title"></div>
					
				</span>
				<div id="people"></div>
				<div id="map"></div>
			</a>
		</div>

		<div class="MEETUP_EVERYWHERE_WIDGET_nearby">
			<div class="MEETUP_EVERYWHERE_WIDGET_nearby_list">
				
				<div id="date"></div>
				
				
			</div>
		</div>

		<div id="logo"></div>
	</div>
</div>
<br>
Width:
<input type="text" id="width"></input>
<br>
Enter A Name:
<input type="text" id="tempname"></input>
<input type="submit" value="Submit" id="exe"></input>
</body>
</html>
